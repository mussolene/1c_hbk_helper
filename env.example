# 1C Help — переменные окружения
# Скопируйте в .env и задайте значения под своё окружение.
# Не коммитьте .env в репозиторий.

# --- Qdrant ---
QDRANT_HOST=localhost
QDRANT_PORT=6333
QDRANT_COLLECTION=onec_help

# --- Пути к справке ---
# Базовый каталог для MCP и serve (где лежат распакованные .md/.html)
HELP_PATH=/data

# Корень каталогов с версиями 1С для ingest (подпапки = версии, внутри — .hbk)
HELP_SOURCE_BASE=/opt/1cv8
# Альтернативное имя того же
# HELP_SOURCES_DIR=/opt/1cv8

# Список путей через запятую (если не используете HELP_SOURCE_BASE)
# HELP_SOURCE_DIRS=/path/8.3.27,/path/8.3.26

# Языки справки для ingest (ru, en и т.д.)
HELP_LANGUAGES=ru

# Кодировка при чтении файлов справки: по умолчанию UTF-8, затем CP1251. Если вся справка в 1251 — задайте cp1251
# HELP_FILE_ENCODING=

# Временный каталог для ingest (распаковка и сборка перед индексацией)
HELP_INGEST_TEMP=/tmp/help_ingest

# --- Эмбеддинги (ingest и поиск в MCP) ---
# Бэкенд: local (sentence-transformers), openai_api (LM Studio, Ollama, llama.cpp и т.п.) или none (отключены — только плейсхолдер, семантический поиск не работает, search_1c_help_keyword работает)
# EMBEDDING_BACKEND=local

# Имя модели: для local — модель с HuggingFace; для openai_api — желаемая модель. Если её нет на сервере (LM Studio), берётся первая из списка или предпочтительная (nomic-embed-text, all-MiniLM-L6-v2 и т.д.), при необходимости — запрос на загрузку через API LM Studio
# EMBEDDING_MODEL=all-MiniLM-L6-v2

# Для openai_api: базовый URL. По умолчанию LM Studio на хосте: localhost:1234 (локально) или host.docker.internal:1234 (в контейнере)
# EMBEDDING_API_URL=http://host.docker.internal:1234/v1
# Ключ API (если нужен)
# EMBEDDING_API_KEY=
# Размерность вектора при openai_api (обязательно задать под вашу модель, иначе 384)
# EMBEDDING_DIMENSION=768

# Токен HuggingFace (опционально): убирает предупреждение при загрузке локальной модели
# HF_TOKEN=hf_...

# Файл для списка неудачных .hbk при ingest (опционально)
# INGEST_FAILED_LOG=/var/log/ingest_failed.log

# --- Веб (serve) ---
PORT=5000

# Список разрешённых базовых каталогов (через запятую). Если задан — форма принимает только пути из списка.
# HELP_SERVE_ALLOWED_DIRS=/opt/1cv8,/opt/help

# Отключить debug даже при --debug (безопасность в проде)
# PRODUCTION=1

# --- MCP ---
# Транспорт: stdio или http
MCP_TRANSPORT=stdio
MCP_HOST=127.0.0.1
MCP_PORT=5050
MCP_PATH=/mcp
